# SwimLiveScraper README

`SwinLiveScraper` ã¯ã€[æ—¥æœ¬æ°´æ³³é€£ç›Ÿãƒ©ã‚¤ãƒ–çµæœé…ä¿¡ã‚µã‚¤ãƒˆ](https://live-results.swim.or.jp) ã‹ã‚‰ç«¶æŠ€æƒ…å ±ã‚„ç¨®ç›®çµæœã‚’å–å¾—ã—ã€CSVå½¢å¼ã§å‡ºåŠ›ã™ã‚‹ãŸã‚ã®Node.jsãƒ™ãƒ¼ã‚¹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚APIçµŒç”±ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€é¸æ‰‹åã‚„æ‰€å±åã€ç¨®ç›®åãªã©ã§æ¤œç´¢ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

---

## ğŸ“¦ æ¦‚è¦

- ç«¶æŠ€å¤§ä¼šæƒ…å ±ï¼ˆæ—¥ä»˜åˆ¥ï¼‰ã®å–å¾—
- ãƒ’ãƒ¼ãƒˆã”ã¨ã®ãƒ¬ãƒ¼ã‚¹çŠ¶æ³ã¨çµæœã®å–å¾—
- é¸æ‰‹åãƒ»æ‰€å±ãƒ»ç¨®ç›®åã§ã®ãƒ’ãƒ¼ãƒˆæ¤œç´¢æ©Ÿèƒ½
- å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§å‡ºåŠ›å¯èƒ½

---

## ğŸ› ï¸ ä½¿ç”¨æŠ€è¡“ / ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- Node.js
- `json2csv`ï¼šJSONãƒ‡ãƒ¼ã‚¿ã‚’CSVã«å¤‰æ›
- `fs`ï¼šãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œï¼ˆCSVå‡ºåŠ›ï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼š
  - `scraper.js`: APIé€šä¿¡å‡¦ç†
  - `parser.js`: ãƒ¬ãƒ¼ã‚¹çµæœã®è§£æãƒ»æ•´å½¢
  - `utils.js`: å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

---

## ğŸ§© ã‚¯ãƒ©ã‚¹æ§‹æˆ

### `SwimLiveScraper`

ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã§ã€ä»¥ä¸‹ã®é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ï¼š

| ãƒ¡ã‚½ãƒƒãƒ‰å | èª¬æ˜ |
|-----------|------|
| `getMemberGroupGames(groupCode)` | æ‰€å±å›£ä½“ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å¤§ä¼šä¸€è¦§ã‚’å–å¾— |
| `getGameDetails(gameCode)` | å¤§ä¼šã‚³ãƒ¼ãƒ‰ã‹ã‚‰è©³ç´°æƒ…å ±ã‚’å–å¾— |
| `getRaceListByGameDate(gameCode, date)` | å¤§ä¼šæ—¥ä»˜ã‹ã‚‰ãƒ¬ãƒ¼ã‚¹ä¸€è¦§ã‚’å–å¾— |
| `getRaceStatus(gameCode, programId, heat)` | ç‰¹å®šãƒ’ãƒ¼ãƒˆã®ãƒ¬ãƒ¼ã‚¹çŠ¶æ³ã‚’å–å¾— |
| `getRaceResults(gameCode, programId, heat)` | ãƒ¬ãƒ¼ã‚¹çµæœã‚’å–å¾—ã—ã€æ•´å½¢ã—ã¦è¿”ã™ |
| `getSearchedRaces(gameCode, playerName, belongName, eventName)` | é¸æ‰‹åãƒ»æ‰€å±ãƒ»ç¨®ç›®åã§ãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚’æ¤œç´¢ |
| `exportToCSV(data, filename)` | å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§ä¿å­˜ |

---

## ğŸ“š ä½¿ã„æ–¹

### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹

#### ä¾‹: ãƒ¬ãƒ¼ã‚¹çµæœã‚’å–å¾—ã—ã¦CSVã«å‡ºåŠ›

```js
const { SwimLiveScraper } = require('swim-live-scraper');

(async () => {
  const gameCode = '2024TOK01';
  const programId = '101';
  const heat = '1';

  // ãƒ¬ãƒ¼ã‚¹çµæœã‚’å–å¾—
  const results = await SwimLiveScraper.getRaceResults(gameCode, programId, heat);

  // CSVã«å‡ºåŠ›
  SwimLiveScraper.exportToCSV(results, 'results.csv');
})();
```

#### ä¾‹: é¸æ‰‹åã§ãƒ¬ãƒ¼ã‚¹ã‚’æ¤œç´¢

```js
const gameCode = '2024TOK01';
const playerName = 'å±±ç”°å¤ªéƒ';

const races = await SwimLiveScraper.getSearchedRaces(gameCode, playerName);
console.log(races);
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
swim-live-scraper/
â”œâ”€â”€ index.js                # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼‰
â”œâ”€â”€ scraper.js              # å®Ÿéš›ã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ»APIå‘¼ã³å‡ºã—å‡¦ç†
â”œâ”€â”€ parser.js               # JSONè§£æãƒ»æ•´å½¢å‡¦ç†
â”œâ”€â”€ utils.js                # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆä¾‹ï¼šUnicodeãƒ‡ã‚³ãƒ¼ãƒ‰ï¼‰
â”œâ”€â”€ package.json            # npmè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ README.md               # èª¬æ˜æ›¸
â””â”€â”€ examples/
    â””â”€â”€ example_usage.js    # ä½¿ç”¨ä¾‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

## ğŸ“„ å‡ºåŠ›ã•ã‚Œã‚‹CSVã®ä¸»ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å†…å®¹ |
|-------------|------|
| `swimmer_name` | é¸æ‰‹å |
| `entry_group_name1` | æ‰€å±å |
| `heat` | ãƒ’ãƒ¼ãƒˆç•ªå· |
| `lane` | ãƒ¬ãƒ¼ãƒ³ç•ªå· |
| `game_code` | å¤§ä¼šã‚³ãƒ¼ãƒ‰ |
| `program_id` | ç¨®ç›®ID |
| `display_program_id` | è¡¨ç¤ºç”¨ç¨®ç›®ID |
| `distance` | è·é›¢ |
| `race_date` | ç«¶æŠ€æ—¥æ™‚ |
| `status_name` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆäºˆé¸é€šéãƒ»å¤±æ ¼ãªã©ï¼‰ |
| `result_time` | çµæœã‚¿ã‚¤ãƒ  |

---

## âš ï¸ æ³¨æ„ç‚¹

- ã™ã¹ã¦ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒ**èªè¨¼ä¸è¦**ã§ã™ãŒã€åˆ©ç”¨è¦ç´„ã«å¾“ã£ã¦ãã ã•ã„ã€‚
- å„URLã«ã¯ `${}` å½¢å¼ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«ã¯é©åˆ‡ãªå€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚
- **404ã‚¨ãƒ©ãƒ¼**ãŒå‡ºã‚‹å ´åˆã¯ã€æ­£ã—ã„å¤§ä¼šã‚³ãƒ¼ãƒ‰ãƒ»ç¨®ç›®IDãƒ»ãƒ’ãƒ¼ãƒˆç•ªå·ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“ License

MIT License

---

## ğŸ‘¥ å•é¡Œå ±å‘Šãƒ»ææ¡ˆ

GitHubãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚‹å ´åˆã€Issueã‚„Pull Requestã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼

--- 

ä»¥ä¸Šã§ã™ã€‚